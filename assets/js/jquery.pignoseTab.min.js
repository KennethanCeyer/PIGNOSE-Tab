/*
 *
 *   PIG NOSE TAB 2.0
 *   ================
 *
 *   @ date         2014-07-11
 *   @ author       sungmin. han (http://kennethan.dothome.co.kr)
 *   @ copyright    pig-nose
 *   @ license      'MIT license' - (http://rem.mit-license.org)
 *
 */

!function(i){i.fn.pignoseTab=function(n){var t=this;return this.settings=i.extend({callback:null,animation:"static",animationTime:300,animationEasing:"easeInOutCubic"},n),this.rendering=function(n,e){return n.each(function(n,a){if(!("undefined"==typeof a||a.length<1)){var s=i(a),o=s.parents(".pignose_tab_wrap:last").addClass("pignose_tab_wrap_root"),r=s.children("ul").addClass("pignose_tab_group"),g=r.children("li").addClass("pignose_tab_list"),p=g.children('a:not(".pignose_tab_more")').addClass("pignose_tab_btn"),d=g.children("a.pignose_tab_more"),l=g.children("div").addClass("pignose_tab_con");o.length<1&&(o=s.addClass("pignose_tab_wrap_root")),l.children(".pignose_tab_wrap").length>0&&t.rendering(l.children(".pignose_tab_wrap")),s.hasClass("pignose_tab_responsive_btn")&&i(window).bind("resize",function(){var n=0;d.length&&(n=s.width()-(d.innerWidth(!0)+d.offset().left)),p.each(function(){i(this).outerWidth(parseInt((s.width()-n)/p.length)),i(this).parent().width(i(this).outerWidth(!0))})}),g.filter(".active").length<1&&g.eq(0).addClass("active"),g.filter(".active").children(".pignose_tab_btn, .pignose_tab_con").addClass("active"),g.filter(":last").children(".pignose_tab_btn").addClass("last_btn"),p.bind("click",function(n){i(this).hasClass("active")||(g.removeClass("active").children(".pignose_tab_btn, .pignose_tab_con").removeClass("active"),i(this).parent().addClass("active").children(".pignose_tab_btn, .pignose_tab_con").addClass("active"),t.resizeTab(o),i(window).trigger("resize"),null!=t.settings.callback&&"function"==typeof t.settings&&t.settings.callback()),n.preventDefault()}),"undefined"!=typeof e&&(t.resizeTab(s,"initialization"),i(window).trigger("resize"),i(window).bind("load",function(){i(this).trigger("resize")}))}}),n},this.resizeTab=function(i,n,e){var a,s=e,o=i,r=o.filter(".active"),g=o.find(".pignose_tab_group").eq(0).find("> .pignose_tab_list.active > .pignose_tab_con"),p=o.siblings(".pignose_tab_con"),d=o.find(".pignose_tab_wrap").eq(0).find("> .pignose_tab_group > .pignose_tab_list.active > .pignose_tab_con");return"undefined"==typeof n&&(n=0),"string"==typeof n&&"initialization"==n&&(s="quick",n=0),"undefined"==typeof o||o.length<1?!1:o.is(".pignose_tab_con")===!1?(g.length>0?t.resizeTab(g,n,s):t.resizeTab(p,n,s),!1):(d.length>0&&(a=t.resizeTab(d,n+1,s)),r.length>0&&((null==a||0>=a)&&(a=parseInt(r.outerHeight())),"undefined"==typeof t.settings.animation||!!t.settings.animation==!1||"static"==t.settings.animation||"quick"==s?r.parents(".pignose_tab_wrap").eq(0).height(parseInt(r.position().top)+parseInt(r.outerHeight())):r.parents(".pignose_tab_wrap").eq(0).stop().animate({height:parseInt(r.position().top)+a+"px"},t.settings.animationTime,"undefined"!=typeof window[t.settings.animationEasing]?t.settings.animationEasing:null),a+=parseInt(r.position().top)),a)},t.rendering(this,!0)}}(jQuery);